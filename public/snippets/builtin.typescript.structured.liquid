{%- meta -%}
name: JSON/YAML to TypeScript interface
description: Generates TypeScript interface with properties from a structured data. Handles nested classes and arrays automatically.
lang: typescript
properties:
  input: structured
  root_class: string
  usage_hint: true
  export: true
  comma: bool
example:
  input:
    order_items:
    - name: "Book"
      price: 12
    - name: "Pen"
      price: 5
    - name: "Bag"
      price: 25
  root_class: RootClass
{%- endmeta -%}

{%- assign schema = input | schema_flatten: root_class -%}
{%- assign classNames = schema | keys -%}
{% if usage_hint != false -%}
// Sample Usage
// Parse: JSON.parse("...") as {{ root_class }}
// Stringify: JSON.stringify(yourObject)
{% endif %}
{% for className in classNames -%}
{%- if className == root_class -%}
  {%- assign finalClassName = className -%}
{%- else -%}
  {%- assign finalClassName = className | pascal_case -%}
{%- endif -%}

{% if export %}export {% endif %}interface {{ finalClassName }} {
{%- assign propsKeys = schema[className] | keys -%}
{%- for propName in propsKeys %}
  {% assign type = schema[className][propName] -%}
  {%- if type == 'string' or type == 'string[]' -%}
  {%- elsif type == 'double' or type == 'int' %}
    {%- assign type = 'number' -%}
  {%- elsif type == 'double[]' or type == 'int[]' %}
    {%- assign type = 'number[]' -%}
  {%- elsif type == 'bool' %}
    {%- assign type = 'boolean' -%}
  {%- elsif type == 'bool[]' %}
    {%- assign type = 'boolean[]' -%}
  {%- elsif type endswith '[]' -%}
    {%- assign type = type | pascal_case -%}
    {%- assign type = type | append: '[]' -%}
  {%- else -%}
    {%- assign type = type | pascal_case -%}
  {%- endif -%}
  {{ propName | camel_case }}: {{ type }}{% if comma %},{% endif %}
{%- endfor %}
}

{% endfor -%}